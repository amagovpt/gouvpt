(this["webpackJsonprawgraphs-frontend"]=this["webpackJsonprawgraphs-frontend"]||[]).push([[0],{127:function(e,a,t){e.exports={parsingOptions:"ParsingOptions_parsingOptions__K4kyV","refresh-button":"ParsingOptions_refresh-button__3TkLa","separator-preview":"ParsingOptions_separator-preview__1UuQv"}},133:function(e,a,t){e.exports={dropzone:"UploadFile_dropzone__1h-vB",reject:"UploadFile_reject__2Kpgt",accept:"UploadFile_accept__3mK1X","browse-button":"UploadFile_browse-button__2AUZ1"}},134:function(e,a,t){e.exports={thumbnail:"ChartSelector_thumbnail__1xQ_-",currentChart:"ChartSelector_currentChart__NKILM",disabled:"ChartSelector_disabled__MRXKu"}},135:function(e,a,t){e.exports={swatch:"InlineColorPicker_swatch__11WDP",color:"InlineColorPicker_color__12j-E",popover:"InlineColorPicker_popover__3Hchl",cover:"InlineColorPicker_cover__2KTIs"}},317:function(e,a,t){e.exports={navbar:"Header_navbar__359Kr"}},318:function(e,a,t){e.exports={section:"Section_section__2mYr1"}},32:function(e,a,t){e.exports={"chart-options":"ChartOptions_chart-options__3l80N","chart-option":"ChartOptions_chart-option__AxfdW","color-swatch":"ChartOptions_color-swatch__2yOSf","color-scale-item":"ChartOptions_color-scale-item__3Rhfd",ordinal:"ChartOptions_ordinal__2mFUI","not-ordinal":"ChartOptions_not-ordinal__3DrFs","color-swatches-list":"ChartOptions_color-swatches-list__2EQnZ","options-group":"ChartOptions_options-group__3Zauh","group-header":"ChartOptions_group-header__1X0bJ",collapsed:"ChartOptions_collapsed__pl7d6","collapse-button":"ChartOptions_collapse-button__rUqFX","color-scheme-dropdown-item":"ChartOptions_color-scheme-dropdown-item__1zRUD","scheme-preview":"ChartOptions_scheme-preview__f1lz2"}},320:function(e,a,t){e.exports={footer:"Footer_footer__7dIj9"}},34:function(e,a,t){e.exports={"column-card":"DataMapping_column-card__2VBWp","column-title":"DataMapping_column-title__2yLXi","data-type-icon":"DataMapping_data-type-icon__fdfcN","chart-dimension":"DataMapping_chart-dimension__2tNga","chart-dimension-header":"DataMapping_chart-dimension-header__3FrwJ","accepted-type-icon":"DataMapping_accepted-type-icon__3XRr1","dimension-required":"DataMapping_dimension-required__1FreW","assigned-column":"DataMapping_assigned-column__3S8Vu","column-valid":"DataMapping_column-valid__1wlKa","column-invalid":"DataMapping_column-invalid__3g-BT","remove-assigned":"DataMapping_remove-assigned__3VE_f",dropzone:"DataMapping_dropzone__2L06t",active:"DataMapping_active__NdQHM"}},35:function(e,a,t){e.exports={"data-type-selector":"DataGrid_data-type-selector__2on-B","data-type-selector-item":"DataGrid_data-type-selector-item__3xB1K",selected:"DataGrid_selected__iVbJn","date-format-preview":"DataGrid_date-format-preview__f5V3s","data-type-selector-trigger":"DataGrid_data-type-selector-trigger__1yAyi","date-format-selector":"DataGrid_date-format-selector__19SHO","date-format-selector-entry":"DataGrid_date-format-selector-entry__3kPs-","parent-type-selector":"DataGrid_parent-type-selector__8RCk2","column-name":"DataGrid_column-name__q_QPq","has-error":"DataGrid_has-error__jgPR1","raw-col-header":"DataGrid_raw-col-header__2fXsy",unsorted:"DataGrid_unsorted__2dx3u",acs:"DataGrid_acs__-kgxx",desc:"DataGrid_desc__2WpaO"}},353:function(e,a,t){e.exports={"url-input":"UrlFetch_url-input__3vKK2"}},384:function(e,a,t){e.exports=t(677)},389:function(e,a,t){},394:function(e,a,t){},46:function(e,a,t){e.exports={"loading-option":"DataLoader_loading-option__Spa1h",disabled:"DataLoader_disabled__3RVvn",active:"DataLoader_active__-mHU8","start-over":"DataLoader_start-over__3fWNA",cancel:"DataLoader_cancel__22q8c","loading-component":"DataLoader_loading-component__1zOap","bg-animated":"DataLoader_bg-animated__1j4Qa","bg-animation":"DataLoader_bg-animation__12elS"}},677:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(43),c=t.n(l),o=(t(389),t(10)),i=t(4),s=t(8),u=[{label:"About",slug:"about",href:"https://rawgraphs.io/about"},{label:"GitHub",slug:"github",href:"https://github.com/rawgraphs/rawgraphs-app"}],m=t(317),d=t.n(m),p=t(742),g=t(740);function b(e){var a=e.menuItems;return r.a.createElement(p.a,{bg:"white",expand:"lg",sticky:"top",className:d.a.navbar},r.a.createElement(p.a.Brand,{href:"/"},r.a.createElement("b",null,"RAW"),r.a.createElement("span",{className:"text-primary"},"Graphs")," 2.0 dados.gov.pt"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"ml-auto"},a.map((function(e,a){return r.a.createElement(g.a.Link,{key:"item"+a,href:e.href},e.label)})),r.a.createElement("a",{role:"button",href:"https://github.com/rawgraphs/rawgraphs-app/issues",target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary ml-2 d-flex flex-column align-items-center justify-content-center"},"Report issue"))))}var f=t(318),v=t.n(f),h=t(726),E=t(727),O=t(319),j=t(728);function y(e){return r.a.createElement(h.a,{fluid:!0,className:[v.a.section,e.className].join(" ")},r.a.createElement(E.a,null,r.a.createElement(O.a,null,r.a.createElement("div",{className:"d-flex align-items-center mb-3"},r.a.createElement("h1",null,e.title),e.loading&&r.a.createElement(j.a,{animation:"border",variant:"primary",style:{width:"2rem",height:"2rem",borderWidth:"2px",marginLeft:"2rem"}})),e.children)))}var k=t(320),w=t.n(k),C=t(21),N=t(239);function _(e){return r.a.createElement(h.a,{fluid:!0,style:{backgroundColor:"var(--dark)"}},r.a.createElement(h.a,{className:w.a.footer},r.a.createElement(E.a,null,r.a.createElement(O.a,{xs:6,sm:{span:5,order:1},lg:{span:3,order:1}},r.a.createElement("p",{className:"Xsmall"},"RAWGraphs is an open source project designed and developed by"," ",r.a.createElement("a",{href:"http://densitydesign.org/",target:"_blank",rel:"noopener noreferrer"},"DensityDesign"),","," ",r.a.createElement("a",{href:"https://calib.ro/",target:"_blank",rel:"noopener noreferrer"},"Calibro")," ","and"," ",r.a.createElement("a",{href:"https://inmagik.com/",target:"_blank",rel:"noopener noreferrer"},"Inmagik"),".",r.a.createElement("br",null),"\xa9 2013-2021"," ",r.a.createElement("a",{href:"https://raw.github.com/rawgraphs/rawgraphs-app/master/LICENSE"},"(Apache License 2.0)"))),r.a.createElement(O.a,{xs:6,sm:{span:5,order:3},lg:{span:3,order:1}},r.a.createElement("p",{className:"Xsmall"})),r.a.createElement(O.a,{xs:6,sm:{span:6,offset:1,order:2},md:{span:3},lg:{offset:0},xl:{span:2,offset:2}},r.a.createElement("p",null,r.a.createElement(C.i,null)," hello at rawgraphs.io"),r.a.createElement("p",null,r.a.createElement(N.b,null)," ",r.a.createElement("a",{href:"https://twitter.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"@rawgraphs"))),r.a.createElement(O.a,{xs:6,sm:{span:6,offset:1,order:4},md:{span:2},lg:{offset:0},xl:{span:2,offset:0}},r.a.createElement("p",null,r.a.createElement(N.a,null)," ",r.a.createElement("a",{href:"https://github.com/rawgraphs",target:"_blank",rel:"noopener noreferrer"},"Github")),r.a.createElement("p",null,r.a.createElement(C.d,null)," ",r.a.createElement("a",{href:"https://old.rawgraphs.io",target:"_blank",rel:"noopener noreferrer"},"RAWGraphs v.1"))))))}var S=t(736),D=t(321);var x,T,R=function(){var e=function(){var e=Object(n.useState)({width:void 0,height:void 0}),a=Object(i.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),a=Object(n.useState)(e.width<992),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=function(){c(!1),m(!0)};return Object(n.useEffect)((function(){!1===u&&c(e.width<992)}),[u,e]),r.a.createElement(S.a,{className:"raw-modal",show:l,onHide:d,backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,{as:"h5"},r.a.createElement("span",{role:"img","aria-label":"Party icon"},"\ud83c\udf89")," ","Welcome to the new RAWGraphs!")),r.a.createElement(S.a.Body,null,r.a.createElement("p",{className:"big"},"RAWGraphs 2.0 is designed for ",e.width>=768?"slightly ":" ","bigger screens!"),r.a.createElement("p",null,"Resize your browser window or"," ",r.a.createElement("a",{href:"mailto:?subject=Visit+RAWGraphs+2.0&body=Hello%21%0D%0APlease+do+not+forget+to+take+a+look+at+the+new+version+of+RAWGraphs%21%0D%0A%0D%0AVisit%3A+https%3A%2F%2Fdev.rawgraphs.io%2F%0D%0A%0D%0ASee+you+later%2C%0D%0AThe+RAWGraphs+Team"},r.a.createElement(C.g,null)," send yourself a reminder")," ","to come back at a better time."),r.a.createElement("p",null,"Touch devices are not fully supported yet.")),r.a.createElement(S.a.Footer,null,r.a.createElement(D.a,{variant:"primary",onClick:d},"Got it!")))},M=t(25),L=t(322),I=t(323),A=t(324),F=t(325),V=t(326),U=t(327),P=t(328),B=t(329),q=t(330),G=t(331),z=t(332),W=t(333),H=t(334),K=t(335),J=t(336),X=t(337),Y=t(338),Q=t(339),Z=t(340),$=t(341),ee=t(342),ae=t(343),te=t(344),ne=t(345),re=t(346),le=t(347),ce=t(348),oe=t(349),ie=t(350),se=t(351),ue=C.f,me=C.k,de=C.o,pe={date:ue,number:me,string:de},ge={"ar-EG":L,"ca-ES":I,"cs-CZ":A,"da-DK":F,"de-CH":V,"de-DE":U,"en-CA":P,"en-GB":B,"en-US":q,"es-ES":G,"es-MX":z,"fa-IR":W,"fi-FI":H,"fr-CA":K,"fr-FR":J,"he-IL":X,"hu-HU":Y,"it-IT":Q,"ja-JP":Z,"ko-KR":$,"mk-MK":ee,"nb-NO":ae,"nl-NL":te,"pl-PL":ne,"pt-BR":re,"ru-RU":le,"sv-SE":ce,"uk-UA":oe,"zh-CN":ie,"zh-TW":se},be={"\\t":"Tab",";":"Semicolon",",":"Comma","|":"Pipe"},fe=Object.keys(be),ve={count:"Count",mean:"Average",median:"Median",max:"Max",min:"Min",countDistinct:"Count unique",sum:"Sum",csv:"CSV",csvDistinct:"CSV (unique)"},he={sequential:"Sequential",diverging:"Diverging",ordinal:"Ordinal"},Ee={interpolateBlues:"Blue sequential",interpolateGreens:"Green sequential",interpolateReds:"Red sequential",interpolateRdBu:"RdBu diverging",interpolateBrBG:"BrBG diverging",interpolatePiYG:"PiYG diverging",schemeCategory10:"Categorical 10",interpolateTurbo:"Turbo discrete",interpolateSpectral:"Spectral discrete"},Oe=t(240),je=function(){return new Worker("/_themes/gouvpt/js/worker.5a7977cd.worker.js")};var ye=t(3),ke=t(2);var we=[{dataType:"json",parse:function(e){return[JSON.parse(e),{}]}},{dataType:"csv",parse:function(e,a){if(a.separator)return[Object(ke.dsvFormat)(a.separator).parse(e),{separator:a.separator}];var t,n=[],r=Object(ye.a)(fe);try{for(r.s();!(t=r.n()).done;){var l=t.value.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");try{var c=Object(ke.dsvFormat)(l).parse(e);(c.length>0&&Object.keys(c[0]).length>1||","===l)&&n.push({separator:l,score:Object.keys(c[0]).length,parsed:c})}catch(o){}}}catch(i){r.e(i)}finally{r.f()}return n.sort((function(e,a){return a.score-e.score})),[n[0].parsed,{separator:n[0].separator}]}}];function Ce(e,a){var t=function(e,a){var t,n=e.trim().replace(/^(?=\n)$|^\s*|\s*$|\n\n+/gm,""),r=Object(ye.a)(we);try{for(r.s();!(t=r.n()).done;){var l=t.value;try{var c=l.parse(n,a),o=Object(i.a)(c,2),s=o[0],u=o[1];return[l.dataType,s,u]}catch(m){}}}catch(d){r.e(d)}finally{r.f()}return[null,null]}(e,a),n=Object(i.a)(t,3),r=n[0],l=n[1],c=n[2];return null===r?[r,l,"Cannot parse dataset! (This should never happen)",{}]:"json"===r?["json",l,null,c]:l.length>0?[r,l,null,c]:[null,null,"We can't parse your data.",{}]}function Ne(e){return["string","number","boolean"].includes(typeof e)}var _e=t(13);function Se(e,a){return Object(M.flatMap)(e,(function(e){var t=e[a],n=Object(M.omit)(e,a);return Object(M.map)(n,(function(e,n){var r;return r={},Object(_e.a)(r,a,t),Object(_e.a)(r,"column",n),Object(_e.a)(r,"value",e),r}))}))}var De="direct",xe="replace",Te={};function Re(){var e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),c=Object(i.a)(l,2),u=c[0],m=c[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),g=p[0],b=p[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],E=v[1],O=Object(n.useState)(null),j=Object(i.a)(O,2),y=j[0],k=j[1],w=Object(n.useState)([null,null]),C=Object(i.a)(w,2),N=C[0],_=C[1],S=Object(n.useState)(","),D=Object(i.a)(S,2),T=D[0],R=D[1],L=Object(n.useState)(","),I=Object(i.a)(L,2),A=I[0],F=I[1],V=Object(n.useState)("."),U=Object(i.a)(V,2),P=U[0],B=U[1],q=Object(n.useState)(navigator.language||"en-US"),G=Object(i.a)(q,2),z=G[0],W=G[1],H=Object(n.useState)(),K=Object(i.a)(H,2),J=K[0],X=K[1],Y=Object(n.useState)(null),Q=Object(i.a)(Y,2),Z=Q[0],$=Q[1],ee=Object(i.a)(N,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(!1),re=Object(i.a)(ne,2),le=re[0],ce=re[1],oe=Object(n.useState)(De),ie=Object(i.a)(oe,2),se=ie[0],ue=ie[1],me=Object(n.useState)(void 0),de=Object(i.a)(me,2),pe=de[0],be=de[1],fe=null!==te&&void 0!==te?te:null===Z||void 0===Z?void 0:Z.dataTypes,ve=Object(n.useCallback)((function(e,a,t){return ce(!0),function(e,a,t){try{x.terminate()}catch(n){}return x=new je,Oe.a(x).parseDataset(e,a,t)}(e,a,Object(o.a)(Object(o.a)({},t),{},{dateLocale:Object(M.get)(ge,t.locale)})).then((function(e){return e})).catch((function(e){console.log("eee",e)})).finally((function(){ce(!1)}))}),[ce]),he=Object(n.useCallback)((function(e,a,t){return ce(!0),new Promise((function(n,r){try{n(Object(s.u)(e,a,Object(o.a)(Object(o.a)({},t),{},{dateLocale:Object(M.get)(ge,t.locale)})))}catch(l){r(l)}finally{ce(!1)}}))}),[ce]),Ee=Object(n.useCallback)((function(e,a,t){return ve(e,a,t)}),[ve,he]),ye=Object(n.useCallback)((function(e,a,t){return Ee(e,a,t).then((function(e){return $(e)}))}),[Ee]),ke=Object(n.useCallback)((function(){$(null),b(null),E(null),r(""),m(null),k(null),X(null),_([null,null])}),[]),we=Object(n.useCallback)((function(e){var a=e.userInput,t=e.userData,n=e.userDataType,l=e.parseError,c=e.unstackedColumns,o=e.unstackedData,i=e.dataTypes,s=e.separator,u=e.thousandsSeparator,d=e.decimalsSeparator,p=e.locale,g=e.stackDimension,f=e.dataSource;r(a),E(n),R(s),F(u),B(d),W(p),X(g),m(f),b(t),k(l),_([o,c]),ye(t,i,{thousandsSeparator:u,decimalsSeparator:d,locale:p})}),[ye]),_e=Object(n.useCallback)((function(e){Ee(e,void 0,{locale:z,decimal:P,group:A}).then((function(a){if(a.errors.length>0)Te.replacedData=a,be("parse-error");else{var t=Object.keys(fe),n=Object.keys(a.dataTypes),r=Object(M.difference)(t,n);if(r.length>0)Te.replacedData=a,be("missing-column:"+r[0]);else{var l=Object(o.a)(Object(o.a)({},a.dataTypes),fe);Ee(e,l,{locale:z,decimal:P,group:A}).then((function(t){if(t.errors.length>0)Te.replacedData=a,be("type-mismatch");else if(J){_([e,t.dataTypes]);var n=Se(e,J);b(n),Ee(n,Z.dataTypes,{locale:z,decimal:P,group:A}).then((function(e){return $(e)}))}else $(t)}))}}}))}),[fe,Z,P,z,Ee,J,A]),Re=Object(n.useCallback)((function(e){b(e),se===De?ye(e,void 0,{locale:z,decimal:P,group:A}):se===xe?_e(e):console.error("Unknown data loader mode!")}),[P,_e,z,se,ye,A]);function Me(e,a,t){var n=Ce(e,{separator:Object(M.get)(t,"separator",null)}),l=Object(i.a)(n,4),c=l[0],o=l[1],s=l[2],u=l[3];r(e),m(a),E(c),k(s),u&&"object"===typeof u&&"separator"in u&&R(u.separator),"json"===c||s||Re(o)}var Le=Object(n.useCallback)((function(e){var a=e.map((function(e){var a=e;if(Array.isArray(a)){var t={};a.forEach((function(e,a){t["Column ".concat(a+1)]=e})),a=t}(Ne(a)||null===a)&&(a={value:a});var n={};for(var r in a){var l=a[r],c=typeof l;if(Array.isArray(l))n[r]=l.filter(Ne).join(" ");else if("object"===c&&null!==c)for(var o in l){var i=l[o];Ne(i)&&(n["".concat(r,".").concat(o)]=i)}else Ne(l)&&(n[r]=l)}return n})).filter((function(e){return null!==e}));b(a),Re(a)}),[Re]);var Ie=Object(n.useCallback)((function(){ue(xe),Te.userInput=t,Te.userDataType=h,Te.dataSource=u,Te.userData=g,r(null),E(null),m(null),b(null)}),[u,g,h,t]),Ae=Object(n.useCallback)((function(){be(!1),ue(De),r(Te.userInput),E(Te.userDataType),m(Te.dataSource),b(Te.userData)}),[]),Fe=Object(n.useCallback)((function(){be(!1),$(Te.replacedData),k(null),X(null),_([null,null])}),[]);return{userInput:t,setUserInput:Me,userData:g,userDataType:h,parseError:y,unstackedData:ae,unstackedColumns:te,separator:T,setSeparator:function(e){var a=Ce(t,{separator:e}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];R(e),E(r),k(c),"json"!==r&&!c&&e&&(b(l),ye(l,void 0,{locale:z,decimal:P,group:A}))},thousandsSeparator:A,setThousandsSeparator:function(e){var a=Ce(t,{separator:T}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];F(e),E(r),k(c),"json"===r||c||(b(l),ye(l,void 0,{locale:z,decimal:P,group:e}))},decimalsSeparator:P,setDecimalsSeparator:function(e){var a=Ce(t,{separator:T}),n=Object(i.a)(a,3),r=n[0],l=n[1],c=n[2];B(e),E(r),k(c),"json"===r||c||(b(l),ce(!0),ye(l,void 0,{locale:z,decimal:e,group:A}))},locale:z,setLocale:function(e){Z&&(ye(Z.dataset,Z.dataTypes,{locale:e,decimal:P,group:A}),W(e))},stackDimension:J,dataSource:u,data:Z,loading:le,coerceTypes:function(e){ye(g,e,{locale:z,decimal:P,group:A})},loadSample:function(e,a){R(a),Me(e,{type:"sample"},{separator:a})},handleInlineEdit:function(e){b(e),ye(e,Z.dataTypes,{locale:z,decimal:P,group:A})},handleStackOperation:function(e){if(X(e),null!==e){null===ae&&_([g,Z.dataTypes]);var a=Se(ae||g,e);b(a),ye(a,void 0,{locale:z,decimal:P,group:A})}else b(ae),ye(ae,te,{locale:z,decimal:P,group:A}),_([null,null])},setJsonData:Le,resetDataLoader:ke,hydrateFromSavedProject:we,dataLoaderMode:se,startDataReplace:Ie,cancelDataReplace:Ae,commitDataReplace:Fe,replaceRequiresConfirmation:pe}}var Me=t(17),Le=t(19),Ie=t(737),Ae=t(363),Fe=t(744),Ve=t(7),Ue=t.n(Ve),Pe=t(35),Be=t.n(Pe),qe=Object.keys(s.c),Ge=r.a.forwardRef((function(e,a){var t=e.currentFormat,n=e.onChange,l=e.className,c=Object(Le.a)(e,["currentFormat","onChange","className"]);return r.a.createElement("div",Object.assign({className:Ue()(l,Be.a["date-format-selector"]),ref:a},c),qe.map((function(e){return r.a.createElement("div",{key:e,className:Ue()(Be.a["date-format-selector-entry"],Object(_e.a)({},Be.a.selected,Object(M.get)(t,"dateFormat","")===e)),onClick:function(a){a.stopPropagation(),a.preventDefault(),n&&n({type:"date",dateFormat:e})}},e)})))}));function ze(e){var a=e.currentType,t=e.onTypeChange,l=e.currentTypeComplete,c=Object(n.useRef)(null),o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(M.get)(a,"type",a),p=Object(n.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var n=e.target.dataset.datatype;"function"!==typeof t||Object(M.isEqual)(n,a)||t(n),m(!1)}),[a,t]),g=Object(n.useCallback)((function(e){"function"!==typeof t||Object(M.isEqual)(e,a)||t(e),m(!1)}),[a,t]),b=Object(n.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),m(!u)}),[u]),f=pe[d];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{role:"button",className:Be.a["data-type-selector-trigger"],ref:c,onClick:b},r.a.createElement(f,null)),r.a.createElement(Ae.a,{target:c.current,show:u,placement:"bottom-start",rootClose:!0,rootCloseEvent:"click",onHide:function(){m(!1)},container:document.body},(function(e){e.placement,e.scheduleUpdate,e.arrowProps,e.outOfBoundaries,e.show;var t=Object(Le.a)(e,["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"]);return r.a.createElement("div",Object.assign({id:"data-type-selector",className:Be.a["data-type-selector"],onClick:function(e){return e.stopPropagation()}},t),r.a.createElement("div",{"data-datatype":"number",onClick:p,className:Ue()(Be.a["data-type-selector-item"],Object(_e.a)({},Be.a.selected,"number"===d))},r.a.createElement(me,null)," Number"),r.a.createElement(Fe.a,{placement:"right-start",overlay:r.a.createElement(Ge,{currentType:a,onChange:g}),trigger:"click"},(function(e){var a=e.ref,t=Object(Le.a)(e,["ref"]);return r.a.createElement("div",Object.assign({ref:a,"data-datatype":"date"},t,{className:Ue()(Be.a["data-type-selector-item"],Be.a["parent-type-selector"],Object(_e.a)({},Be.a.selected,"date"===d))}),r.a.createElement("div",null,r.a.createElement(ue,null),"Date","date"===d&&r.a.createElement("span",{className:Be.a["date-format-preview"]}," ("+l.dateFormat+")  ")),r.a.createElement(C.h,{style:{marginRight:0,fill:"var(--gray-700)"}}))})),r.a.createElement("div",{"data-datatype":"string",onClick:p,className:Ue()(Be.a["data-type-selector-item"],Object(_e.a)({},Be.a.selected,"string"===d))},r.a.createElement(de,null)," String"))})))}function We(e){var a=Object.assign({},e).column,t=a.key,n=a.sortColumn,l=a.sortDirection;return r.a.createElement("div",{className:Ue()(Object(_e.a)({},Be.a["raw-col-header"],!0),Object(_e.a)({},Be.a.unsorted,t!==n||t===n&&"NONE"===l),Object(_e.a)({},Be.a.acs,t===n&&"ASC"===l),Object(_e.a)({},Be.a.desc,t===n&&"DESC"===l))},r.a.createElement(ze,{currentType:a._raw_datatype,onTypeChange:a._raw_coerceType,currentTypeComplete:a._raw_datatype}),r.a.createElement("span",{className:Ue()(Be.a["column-name"],"text-truncate","d-block"),title:a.name},a.name))}function He(e){var a,t=e.userDataset,l=e.dataset,c=e.errors,u=e.dataTypes,m=e.coerceTypes,d=e.onDataUpdate,p=Object(n.useState)(["id","NONE"]),g=Object(i.a)(p,2),b=Object(i.a)(g[0],2),f=b[0],v=b[1],h=g[1],E=Object(n.useMemo)((function(){return Object(M.keyBy)(c,"row")}),[c]),O=Object(n.useRef)(),j=24+8*(Math.floor(Math.log10(t.length))+1),y=((null===(a=O.current)||void 0===a?void 0:a.getBoundingClientRect().width)-j-1)/Object.keys(u).length,k=y?Math.max(y,170):170,w=Object(n.useMemo)((function(){return t&&u?[{key:"_id",name:"",headerRenderer:function(){return null},frozen:!0,width:j,sortable:!0}].concat(Object(Me.a)(Object.keys(u).map((function(e,a){return{key:e,name:e,sortColumn:f,sortDirection:v,headerRenderer:We,editable:!0,formatter:function(a){var t,n,l=a.row;return r.a.createElement("div",{className:Ue()(Object(_e.a)({},Be.a["has-error"],null===l||void 0===l||null===(t=l._errors)||void 0===t?void 0:t[e]))},null===(n=l[e])||void 0===n?void 0:n.toString())},_raw_datatype:u[e],_raw_coerceType:function(a){return m(Object(o.a)(Object(o.a)({},u),{},Object(_e.a)({},e,a)))},sortable:!0,resizable:!0,width:k}})))):[]}),[m,u,t,j,k,f,v]),C=Object(n.useMemo)((function(){var e=t.map((function(e,a){var t;return Object(o.a)(Object(o.a)({},e),{},{_id:a+1,_stage3:l[a],_errors:null===(t=E[a])||void 0===t?void 0:t.error})}));if("NONE"===v)return e;var a=Object(s.q)(u[f]);if("number"===a)e=e.sort((function(e,a){return e._stage3[f]-a._stage3[f]}));else if("date"===a){var n;e=null!==(n=e.sort((function(e,a){var t,n,r;return null!==(t=null===(n=e._stage3[f])||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0-(null===(r=a._stage3[f])||void 0===r?void 0:r.valueOf())})))&&void 0!==n?n:0}else e=e.sort((function(e,a){var t;return null===(t=e._stage3[f])||void 0===t?void 0:t.toString().localeCompare(a._stage3[f].toString())}));return"DESC"===v?e.reverse():e}),[t,v,u,f,l,E]),N=Object(n.useCallback)((function(e,a){h([e,a])}),[]);return r.a.createElement("div",{ref:O},r.a.createElement(Ie.a,{minColumnWidth:j,columns:w,rows:C,rowHeight:48,sortColumn:f,sortDirection:v,onSort:N,height:432,onColumnResize:function(){},onRowsUpdate:function(e){if("CELL_UPDATE"===e.action){var a=Object(Me.a)(t);a[e.fromRow]=Object(o.a)(Object(o.a)({},a[e.fromRow]),{},Object(_e.a)({},e.cellKey,e.updated[e.cellKey])),d&&d(a)}}}))}var Ke=t(15),Je=t.n(Ke),Xe=t(102),Ye=t(746),Qe=[{name:"Highest grossing movies in history",category:"Bubble chart, convex hull diagram",url:"./sample-datasets/Bubble Chart - TOP 50 Groossing Movies.tsv",delimiter:"\t"},{name:"US Presidential Elections (1976-2016)",category:"Line Graph",url:"./sample-datasets/Line Graph - US Presidential Elections.tsv",delimiter:"\t"},{name:"Letter Frequency by Language",category:"Matrix plot (Heatmap)",url:"./sample-datasets/Matrix Plot - Letters frequencies by language.tsv",delimiter:"\t"},{name:"Aromas of wine and frequency",category:"Sunburst Diagram",url:"./sample-datasets/Sunburst - Wine Aromas.tsv",delimiter:"\t"},{name:"Orchestras by musical instrument",category:"Treemap, Circle packing",url:"./sample-datasets/Treemap - Orchestra.tsv",delimiter:"\t"},{name:"Animal kingdom classification",category:"Dendrogram",url:"./sample-datasets/Dendrogram - animal kingdom.tsv",delimiter:"\t"},{name:"Most populated cities per continent",category:"Boxplot, Violin plot",url:"./sample-datasets/Boxplot - biggest-cities.tsv",delimiter:"\t"},{name:"FIFA playes statistics",category:"Radar Chart",url:"./sample-datasets/Radar Chart - Fifa players.tsv",delimiter:"\t"},{name:"Olympics Medals",category:"Streamgraph, Bumpchart",url:"./sample-datasets/Streamgraph - Olympics Medals.tsv",delimiter:"\t"},{name:"Basketball shots",category:"Hexagonal Binning",url:"./sample-datasets/Hexbin - basketball shots.tsv",delimiter:"\t"},{name:"Energy flows",category:"Sankey diagram, Arc diagram",url:"./sample-datasets/Sankey - Energy flows.csv",delimiter:","},{name:"New York mean wage per occupation",category:"Beeswarm plot",url:"./sample-datasets/Beeswarm plot - NY mean wages.tsv",delimiter:"\t"},{name:"RIAA - Revenues per Music format",category:"Bar chart",url:"./sample-datasets/Bar chart - RIAA Music format revenues.tsv",delimiter:"\t"}];function Ze(e){var a=e.onSampleReady,t=e.setLoadingError,n=function(){var e=Object(Xe.a)(Je.a.mark((function e(n){var r,l,c,o;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.delimiter,l=n.url,e.prev=1,e.next=4,fetch(l);case 4:c=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t("Loading error. "+e.t0.message),e.abrupt("return");case 11:return e.next=13,c.text();case 13:o=e.sent,a(o,r),t(null);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(E.a,null,Qe.sort((function(e,a){return e.name.localeCompare(a.name)})).map((function(e,a){return r.a.createElement(O.a,{xs:6,lg:4,xl:3,key:a,style:{marginBottom:15}},r.a.createElement(Ye.a,{onClick:function(){n(e)},className:"cursor-pointer h-100"},r.a.createElement(Ye.a.Body,{className:"d-flex flex-column"},r.a.createElement(Ye.a.Title,{className:""},r.a.createElement("h2",{className:""},e.name)),r.a.createElement(Ye.a.Subtitle,{className:"mt-auto"},r.a.createElement("h4",{className:"m-0"},e.category)))))})))}t(394);var $e=function e(a){var t=a.contextName,l=a.nestingLevel,c=a.context,o=a.selectFilter,s=a.onSelect,u=o(c),m=typeof c,d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],b=p[1],f=["json-nested",u?"selectable":null,g?"hover":null].filter((function(e){return null!==e})).join(" "),v=Object(n.useCallback)((function(e){u&&(e.stopPropagation(),e.preventDefault(),s&&s(c))}),[c,u,s]),h=Object(n.useCallback)((function(e){u&&(e.stopPropagation(),e.preventDefault(),b(!0))}),[u]),E=Object(n.useCallback)((function(e){u&&(e.stopPropagation(),e.preventDefault(),b(!1))}),[u]);return"object"===m&&null!==m?r.a.createElement("div",{className:f,onClick:v,onMouseOver:h,onMouseOut:E},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"property-name"},t),r.a.createElement("span",{className:"colon"},": ")),!Array.isArray(c)&&r.a.createElement("span",{className:"curly-bracket open-bracket"},"{"),Array.isArray(c)&&r.a.createElement("span",{className:"square-bracket open-bracket"},"["),Object(M.map)(c,(function(a,t){return r.a.createElement(e,{key:t,contextName:Array.isArray(c)?null:t,nestingLevel:l+1,context:a,selectFilter:o,onSelect:s})})),!Array.isArray(c)&&r.a.createElement("span",{className:"curly-bracket close-bracket"},"}"),Array.isArray(c)&&r.a.createElement("span",{className:"square-bracket close-bracket"},"]")):r.a.createElement("div",{className:f,onClick:v,onMouseOver:h,onMouseOut:E},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"property-name"},t),r.a.createElement("span",{className:"colon"},": ")),null===c&&r.a.createElement("span",{className:"scalar-value"},"null"),null!==c&&r.a.createElement(r.a.Fragment,null,("bigint"===m||"number"===m)&&r.a.createElement("span",{className:"scalar-value scalar-value-numeric"},c.toString()),"string"===m&&r.a.createElement("span",{className:"scalar-value scalar-value-string"},'"',c.toString(),'"'),"boolean"===m&&r.a.createElement("span",{className:"scalar-value scalar-value-bool"},'"',c?"true":"false",'"'),"undefined"===m&&r.a.createElement("span",{className:"scalar-value scalar-value-undefined"},"undefined")))},ea=function(e){var a=e.context,t=e.selectFilter,n=e.onSelect;return r.a.createElement("pre",{className:"json-viewer"},r.a.createElement($e,{contextName:null,nestingLevel:0,context:a,selectFilter:t,onSelect:n}))},aa=t(361),ta=t(127),na=t.n(ta);function ra(e){var a=e.title,t=e.value,l=e.onChange,c=(Object(Le.a)(e,["title","value","onChange"]),t.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")),o=Object(n.useCallback)((function(e){if(l){var a=e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\t/g,"\t");l(a)}}),[l]),i=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:["small",na.a["separator-preview"]].join(" ")},e)," ",r.a.createElement("span",null,be[e]))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"option"},a,r.a.createElement(aa.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(aa.a.Toggle,{variant:"white",className:"d-flex justify-content-start align-items-center text-truncate"},i(c)),r.a.createElement(aa.a.Menu,null,Object.keys(be).map((function(e){return r.a.createElement(aa.a.Item,{key:be[e],onSelect:function(){return o(e)}},i(e))}))))))}function la(e){var a=e.title,t=e.value,l=e.onChange,c=Object(Le.a)(e,["title","value","onChange"]),o=t,i=Object(n.useCallback)((function(e){if(l){var a=e.target.value;l(a)}}),[l]);return r.a.createElement("div",{className:"option"},a,r.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:i},c)))}function ca(e){var a=e.title,t=e.value,l=e.onChange,c=Object(Le.a)(e,["title","value","onChange"]),o=t,i=Object(n.useCallback)((function(e){if(l){var a=e.target.value;l(a)}}),[l]);return r.a.createElement("div",{className:"option"},a,r.a.createElement("input",Object.assign({type:"text",className:"form-control text-field d-inline-block",value:o,onChange:i},c)))}function oa(e){var a=e.title,t=e.value,l=e.onChange,c=(Object(Le.a)(e,["title","value","onChange"]),Object(n.useCallback)((function(e){l&&l(e)}),[l]));return r.a.createElement("div",{className:"option"},a,r.a.createElement(aa.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(aa.a.Toggle,{variant:"white",className:""},t),r.a.createElement(aa.a.Menu,null,r.a.createElement(aa.a.Header,null,r.a.createElement("span",null,"from"," ",r.a.createElement("a",{href:"https://github.com/d3/d3-time-format/tree/master/locale",target:"_blank",rel:"noopener noreferrer"},"d3-time-format"))),Object.keys(ge).map((function(e){return r.a.createElement(aa.a.Item,{key:e,onSelect:function(){return c(e)}},e)})))))}function ia(e){var a=e.title,t=e.value,l=e.list,c=e.onChange,o=(Object(Le.a)(e,["title","value","list","onChange"]),Object(n.useCallback)((function(e){c&&c(e)}),[c]));return r.a.createElement("div",{className:"option"},a,r.a.createElement(aa.a,{className:"d-inline-block raw-dropdown"},r.a.createElement(aa.a.Toggle,{variant:"white",className:"truncate-160px",disabled:0===l.length},t||"Column"),r.a.createElement(aa.a.Menu,null,t&&r.a.createElement(aa.a.Item,{onSelect:function(){return o(null)}},"Do not stack"),Object.keys(l).map((function(e){return r.a.createElement(aa.a.Item,{key:e,onSelect:function(){return o(e)}},e)})))))}function sa(e){var a=function(){var a=Object(Xe.a)(Je.a.mark((function a(){var t;return Je.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e.dataSource.url);case 2:return t=a.sent,a.t0=e,a.next=6,t.text();case 6:a.t1=a.sent,a.t0.onDataRefreshed.call(a.t0,a.t1);case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(E.a,null,r.a.createElement(O.a,{className:na.a.parsingOptions},r.a.createElement("b",null,"DATA PARSING OPTIONS"),"csv"===e.userDataType&&r.a.createElement(ra,{title:"Column separator",value:e.separator,onChange:function(a){return e.setSeparator(a)}}),r.a.createElement(la,{title:"Thousands separator",value:e.thousandsSeparator,onChange:function(a){return e.setThousandsSeparator(a)}}),r.a.createElement(ca,{title:"Decimals separator",value:e.decimalsSeparator,onChange:function(a){return e.setDecimalsSeparator(a)}}),r.a.createElement(oa,{title:"Date Locale",value:e.locale,onChange:function(a){return e.setLocale(a)}}),"url"===Object(M.get)(e.dataSource,"type","")&&r.a.createElement(D.a,{color:"primary",className:na.a["refresh-button"],onClick:function(){return a()}},r.a.createElement(C.c,{className:"mr-2"}),"Refresh data from url"),r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("b",null,"DATA TRANSFORMATION"),r.a.createElement(ia,{title:"Stack on",value:e.stackDimension,list:e.dimensions,onChange:function(a){return e.setStackDimension(a)}})))}var ua=t(46),ma=t.n(ua);function da(e){var a=e.userInput,t=e.setUserInput,n=e.setLoadingError;return r.a.createElement("textarea",{value:a,onChange:function(e){var a=e.target.value;t(a),n(null)},style:{backgroundColor:"white",border:"1px solid lightgrey",borderRadius:4,width:"100%",padding:"1rem",minHeight:"250px",height:"40vh"}})}var pa=t(362),ga=t(133),ba=t.n(ga);function fa(e){var a,t=e.setUserInput,l=e.setLoadingError,c=Object(n.useCallback)((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result),l(null)})),e.length&&a.readAsText(e[0])}),[l,t]),o=Object(pa.a)({onDrop:c,accept:"text/csv,text/plain,application/json,application/vnd.ms-excel,text/tsv,text/tab-separated-values",maxFiles:1}),i=o.getRootProps,s=o.getInputProps,u=o.isDragReject,m=o.isDragAccept;return r.a.createElement("div",Object.assign({className:Ue()(ba.a.dropzone,(a={},Object(_e.a)(a,ba.a.reject,u),Object(_e.a)(a,ba.a.accept,m),a))},i()),r.a.createElement("input",s()),r.a.createElement("span",null,"Drag a file here or "),r.a.createElement(D.a,{className:ba.a["browse-button"],color:"primary"},"Browse"),r.a.createElement("span",null,"a file from your computer"),m&&r.a.createElement("p",null,"All files will be accepted"),u&&r.a.createElement("p",null,"Some files will be rejected"))}var va=t(353),ha=t.n(va);function Ea(e){e.userInput;var a=e.setUserInput,t=e.setLoadingError,l=new URLSearchParams(window.location.search).get("url"),c=Object(n.useState)(""),o=Object(i.a)(c,2),s=o[0],u=o[1],m=function(){var e=Object(Xe.a)(Je.a.mark((function e(n){var r,l;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:r=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),t("Loading error. "+e.t0.message),e.abrupt("return");case 10:return e.next=12,r.text();case 12:l=e.sent,a(l,{type:"url",url:n}),t(null);case 15:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return l&&m(l),r.a.createElement("input",{className:Ue()("w-100",ha.a["url-input"]),value:s,onChange:function(e){u(e.target.value),m(e.target.value)}})}function Oa(){return r.a.createElement("div",{className:ma.a["loading-component"]},r.a.createElement("div",{className:ma.a["bg-animated"]}),r.a.createElement("p",null,"loading..."))}var ja=t(731);var ya=function(e){var a=e.variant,t=void 0===a?"warning":a,n=e.message,l=void 0===n?"A default warning message.":n;return r.a.createElement(ja.a,{variant:t,className:"my-2"},l)};var ka=function(e){var a=e.replaceRequiresConfirmation,t=e.commitDataReplace,l=e.cancelDataReplace,c=Object(n.useState)(!0),o=Object(i.a)(c,2),s=o[0],u=o[1];return r.a.createElement(S.a,{className:"raw-modal",show:s,onHide:function(){u(!1)},backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,{as:"h5"},"Warning:"," ","parse-error"===a&&r.a.createElement(r.a.Fragment,null,"parsing error"),a.startsWith("missing-column:")&&r.a.createElement(r.a.Fragment,null,"missing column"),"type-mismatch"===a&&r.a.createElement(r.a.Fragment,null,"data-type mismatch"))),r.a.createElement(S.a.Body,null,"parse-error"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"There was an error while parsing new data."),r.a.createElement("p",null,"You can load the new data and try to fix the error or return to the data previously loaded.")),a.startsWith("missing-column:")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The data mapping of this project requires the dimension"," ",r.a.createElement("span",{className:"font-weight-bold"},a.split(":")[1]),", that we can't find in the new data."),r.a.createElement("p",null,"You can create a new data mapping with the new data or return to the data previously loaded.")),"type-mismatch"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The data-types previously set for this project can't be applied to the new data."),r.a.createElement("p",null,"You can use the new data and re-set data-types or return to the data previously loaded."))),r.a.createElement(S.a.Footer,null,r.a.createElement(D.a,{variant:"warning",onClick:function(){t()}},"Load new data"),r.a.createElement(D.a,{variant:"secondary",onClick:function(){l()}},"Cancel")))};var wa=r.a.memo((function(e){var a,t=e.userInput,l=e.setUserInput,c=e.userData,o=e.userDataType,s=e.parseError,u=e.unstackedColumns,m=e.separator,d=e.setSeparator,p=e.thousandsSeparator,g=e.setThousandsSeparator,b=e.decimalsSeparator,f=e.setDecimalsSeparator,v=e.locale,h=e.setLocale,j=e.stackDimension,y=e.dataSource,k=e.data,w=e.loading,N=e.coerceTypes,_=e.loadSample,S=e.handleInlineEdit,D=e.handleStackOperation,x=e.setJsonData,T=(e.resetDataLoader,e.dataLoaderMode),R=e.startDataReplace,L=e.cancelDataReplace,I=e.commitDataReplace,A=e.replaceRequiresConfirmation,F=(e.hydrateFromProject,Object(n.useState)()),V=Object(i.a)(F,2),U=V[0],P=V[1],B=[{id:"url",name:"From URL",message:"Enter a web address (URL) pointing to the data (e.g. a public Dropbox file, a public API, ...). Please, be sure the server is CORS-enabled.",loader:r.a.createElement(Ea,{userInput:t,setUserInput:function(e,a){return l(e,a)},setLoadingError:P}),icon:C.n,disabled:!1,allowedForReplace:!0},{id:"paste",name:"Paste your data",loader:r.a.createElement(da,{userInput:t,setUserInput:function(e){return l(e,{type:"paste"})},setLoadingError:P}),message:"Copy and paste your data from other applications or websites. You can use tabular (TSV, CSV, DSV) or JSON data.",icon:C.e,allowedForReplace:!0},{id:"upload",name:"Upload your data",loader:r.a.createElement(fa,{userInput:t,setUserInput:function(e){return l(e,{type:"file"})},setLoadingError:P}),message:"You can load tabular (TSV, CSV, DSV) or JSON data.",icon:C.q,allowedForReplace:!0}],q=Object(n.useState)(0),G=Object(i.a)(q,2),z=G[0],W=G[1],H=B[z];a=c&&k?r.a.createElement(He,{userDataset:c,dataset:k.dataset,errors:k.errors,dataTypes:k.dataTypes,coerceTypes:N,onDataUpdate:S}):"json"===o&&null===c?r.a.createElement(ea,{context:JSON.parse(t),selectFilter:function(e){return Array.isArray(e)},onSelect:function(e){x(e)}}):w&&!k?r.a.createElement(Oa,null):r.a.createElement(r.a.Fragment,null,H.loader,r.a.createElement("p",{className:"mt-3"},H.message));var K=Object(n.useCallback)((function(){window.location.replace(window.location.pathname)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,!c&&r.a.createElement(O.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},B.filter((function(e){return T!==xe||e.allowedForReplace})).map((function(e,a){var t=["w-100","d-flex","align-items-center","user-select-none","cursor-pointer",ma.a["loading-option"],e.disabled?ma.a.disabled:null,e.id!==H.id||o?null:ma.a.active,o?ma.a.disabled:null].filter((function(e){return null!==e})).join(" ");return r.a.createElement("div",{key:e.id,className:t,onClick:function(){return W(a)}},r.a.createElement(e.icon,{className:"w-25"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},e.name))})),T===xe&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(ma.a["start-over"]," user-select-none cursor-pointer"),onClick:K},r.a.createElement(C.c,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),r.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(ma.a["start-over"]," ").concat(ma.a.cancel," user-select-none cursor-pointer mb-3"),onClick:function(){L()}},r.a.createElement("h4",{className:"m-0 d-inline-block"},"Cancel")))),c&&r.a.createElement(O.a,{xs:3,lg:2,className:"d-flex flex-column justify-content-start pl-3 pr-0 options"},r.a.createElement(sa,{locale:v,setLocale:h,separator:m,setSeparator:d,thousandsSeparator:p,setThousandsSeparator:g,decimalsSeparator:b,setDecimalsSeparator:f,dimensions:k?u||k.dataTypes:[],stackDimension:j,setStackDimension:D,userDataType:o,dataSource:y,onDataRefreshed:function(e){return l(e,y)}}),r.a.createElement("div",{className:"divider mb-3 mt-0"}),r.a.createElement("div",{className:"w-100 mb-2 d-flex justify-content-center align-items-center ".concat(ma.a["start-over"]," user-select-none cursor-pointer"),onClick:K},r.a.createElement(C.c,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Reset")),r.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center ".concat(ma.a["start-over"]," user-select-none cursor-pointer"),onClick:function(){W(0),R()}},r.a.createElement(C.a,{className:"mr-2"}),r.a.createElement("h4",{className:"m-0 d-inline-block"},"Change data"))),r.a.createElement(O.a,null,r.a.createElement(E.a,{className:"h-100"},r.a.createElement(O.a,{className:"h-100"},a,k&&!s&&0===Object(M.get)(k,"errors",[]).length&&r.a.createElement(ya,{variant:"success",message:r.a.createElement("span",null,r.a.createElement("span",{className:"font-weight-bold"},k.dataset.length," rows")," ","(",k.dataset.length*Object.keys(k.dataTypes).length," ","cells) have been successfully parsed, now you can choose a chart!")}),s&&r.a.createElement(ya,{variant:"danger",message:s}),Object(M.get)(k,"errors",[]).length>0&&r.a.createElement(ya,{variant:"warning",message:function(e){var a=Object(M.get)(e,"errors",[]),t=e.dataset.length-a.length,n=a[0].row+1,l=Object.keys(a[0].error)[0];return r.a.createElement("span",null,"Ops, please check ",r.a.createElement("span",{className:"font-weight-bold"},"row ",n)," at column ",r.a.createElement("span",{className:"font-weight-bold"},l),"."," ",2===a.length&&r.a.createElement(r.a.Fragment,null," ","There's another issue at row"," ",r.a.createElement("span",{className:"font-weight-bold"},a[1].row+1),"."," "),a.length>2&&r.a.createElement(r.a.Fragment,null," ","There are issues in"," ",r.a.createElement("span",{className:"font-weight-bold"},a.length-1)," more rows."," "),t>0&&r.a.createElement(r.a.Fragment,null,"The remaining"," ",r.a.createElement("span",{className:"font-weight-bold"},t," row",t>1&&r.a.createElement(r.a.Fragment,null,"s"))," ","look",1===t&&r.a.createElement(r.a.Fragment,null,"s")," fine."))}(k)}),U&&r.a.createElement(ya,{variant:"danger",message:U}))))),A&&r.a.createElement(ka,{replaceRequiresConfirmation:A,commitDataReplace:I,cancelDataReplace:L}))})),Ca=t(26),Na=[Ca.a,Ca.b,Ca.c,Ca.d,Ca.e,Ca.f,Ca.g,Ca.h,Ca.i,Ca.j,Ca.k,Ca.l,Ca.m,Ca.n,Ca.o,Ca.p,Ca.q,Ca.r,Ca.s,Ca.t,Ca.u,Ca.v,Ca.w],_a=t(355),Sa=t.n(_a),Da=t(134),xa=t.n(Da);function Ta(e,a){return"All charts"===a?e:e.filter((function(e){return-1!==e.metadata.categories.indexOf(a)}))}var Ra=r.a.memo((function(e){var a=e.availableCharts,t=e.currentChart,l=e.setCurrentChart,c=Object(n.useState)("All charts"),o=Object(i.a)(c,2),s=o[0],u=o[1],m=Object(n.useMemo)((function(){return Ta(a,s)}),[a,s]),d=Object(n.useCallback)((function(e){u(e);var n=Ta(a,e);-1===n.indexOf(t)&&l(n[0])}),[a,t,l]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(O.a,{className:"text-right"},"Show",r.a.createElement(aa.a,{className:"d-inline-block ml-2 raw-dropdown"},r.a.createElement(aa.a.Toggle,{variant:"white",className:"pr-5"},s.charAt(0).toUpperCase()+s.slice(1)),r.a.createElement(aa.a.Menu,null,r.a.createElement(aa.a.Item,{key:"All charts",onClick:function(){return d("All charts")}},"All charts"),Sa()(a.map((function(e){return e.metadata.categories})).flat()).map((function(e){return r.a.createElement(aa.a.Item,{key:e,onClick:function(){return d(e)}},e.charAt(0).toUpperCase()+e.slice(1))})))))),r.a.createElement(E.a,null,r.a.createElement(O.a,{xs:3,className:"pt-3"},t&&r.a.createElement(Ye.a,{className:xa.a.currentChart},r.a.createElement(Ye.a.Img,{variant:"top",src:t.metadata.thumbnail}),r.a.createElement(Ye.a.Body,null,r.a.createElement(Ye.a.Title,{className:"m-0"},r.a.createElement("h2",{className:"m-0"},t.metadata.name)),r.a.createElement(Ye.a.Subtitle,{className:"m-0"},r.a.createElement("h4",{className:"mb-2"},t.metadata.category)),r.a.createElement(Ye.a.Text,null,t.metadata.description),r.a.createElement(Ye.a.Link,{className:"".concat(xa.a.disabled," underlined"),href:t.metadata.code,target:"_blank"},r.a.createElement(C.l,{color:"black"})," Code"),r.a.createElement(Ye.a.Link,{className:"".concat(xa.a.disabled," underlined"),href:t.metadata.tutorial,target:"_blank"},r.a.createElement(C.l,{color:"black"})," Tutorial")))),r.a.createElement(O.a,null,r.a.createElement(E.a,null,m.map((function(e,a){return r.a.createElement(O.a,{xs:4,key:"chart-"+a,className:"p-3"},r.a.createElement(Ye.a,{onClick:function(){l(e)},className:"flex-row h-100 cursor-pointer ".concat(e===t?"active":"")},r.a.createElement("div",{className:"h-100 w-25 ".concat(xa.a.thumbnail),style:{backgroundImage:'url("'.concat(e.metadata.icon,'")')}}),r.a.createElement(Ye.a.Body,{className:"w-75 px-2 py-3"},r.a.createElement(Ye.a.Title,{className:"m-0"},r.a.createElement("h2",{className:"m-0",style:{whiteSpace:"nowrap"}},e.metadata.name)),r.a.createElement(Ye.a.Subtitle,{className:"m-0"},r.a.createElement("h4",{className:"m-0"},e.metadata.categories.join(", ").charAt(0).toUpperCase()+e.metadata.categories.join(", ").slice(1))))))}))))))})),Ma=t(47),La=t.n(Ma),Ia=t(360),Aa=t(733),Fa=t(743),Va=t(34),Ua=t.n(Va),Pa=function(e){var a=e.dimensionName,t=e.dimensionType,n=e.commitLocalMapping,l=e.rollbackLocalMapping,c=Object(Fa.a)({item:{id:a,type:"column"},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,a){a.didDrop()?n():l()}}),o=Object(i.a)(c,2),u=o[0].isDragging,m=o[1],d=Object(s.q)(t),p=pe[d];return r.a.createElement("div",{ref:m,className:"column-card ".concat(Ua.a["column-card"]," ").concat(u?"is-dragging":"")},r.a.createElement(p,{className:Ua.a["data-type-icon"]}),r.a.createElement("span",{className:Ua.a["column-title"]},a))},Ba=t(732);var qa=function(e){var a=e.type,t=pe[a];return r.a.createElement("span",null,r.a.createElement(Fe.a,{key:"top",placement:"top",overlay:r.a.createElement(Ba.a,{id:"tooltip-top"},"Accepts ",a,"s")},r.a.createElement(t,{className:Ua.a["accepted-type-icon"]})))};function Ga(){return(Ga=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function za(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var Wa=r.a.createElement("path",{d:"M8 0a1 1 0 0 1 1 1v5.268l4.562-2.634a1 1 0 1 1 1 1.732L10 8l4.562 2.634a1 1 0 1 1-1 1.732L9 9.732V15a1 1 0 1 1-2 0V9.732l-4.562 2.634a1 1 0 1 1-1-1.732L6 8 1.438 5.366a1 1 0 0 1 1-1.732L7 6.268V1a1 1 0 0 1 1-1z"}),Ha=function(e){var a=e.svgRef,t=e.title,n=za(e,["svgRef","title"]);return r.a.createElement("svg",Ga({width:16,height:16,fill:"currentColor",className:"bi bi-asterisk",viewBox:"0 0 16 16",ref:a},n),t?r.a.createElement("title",null,t):null,Wa)},Ka=r.a.forwardRef((function(e,a){return r.a.createElement(Ha,Ga({svgRef:a},e))}));t.p;var Ja=function(){return r.a.createElement(Fe.a,{key:"top",placement:"top",overlay:r.a.createElement(Ba.a,{id:"tooltip-top"},"Mandatory")},r.a.createElement(Ka,{width:"1rem",height:"1rem",style:{marginRight:"2px"}}))},Xa=t(745),Ya=t(18),Qa=t.n(Ya),Za=t(130),$a=t.n(Za),et=t(193),at=t.n(et),tt=t(106),nt=t.n(tt);function rt(e){var a=e.draggingColumn,t=e.index,l=e.isValid,c=e.DataTypeIcon,o=e.columnId,s=e.dimension,u=e.aggregators,m=e.relatedAggregation,d=e.onMove,p=e.onChangeAggregation,g=e.onDeleteItem,b=e.onChangeDimension,f=e.commitLocalMapping,v=e.rollbackLocalMapping,h=(e.onInsertColumn,e.replaceDimension),E=(e.localMappding,Object(n.useRef)(null)),O=Object(Xa.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()&&"column"===e.getItem().type}},hover:function(e,a){if(s.multiple&&E.current){var n=t;if(e.dimensionId===s.id){var r,l=e.index;if(l!==n){var c=null===(r=E.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(c.bottom-c.top)/2,i=a.getClientOffset().y-c.top;l<n&&i<o||l>n&&i>o||(d(l,n),e.index=n)}}}},drop:function(e,a){s.multiple||("column"===e.type?b(t,e.id):h(e.dimensionId,s.id,e.index,t))}}),j=Object(i.a)(O,2),y=j[0].isOver,k=j[1],w=Object(Fa.a)({item:{type:"card",index:t,id:o,dimensionId:s.id},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,a){a.didDrop()?f():v()}}),N=Object(i.a)(w,2),_=N[0].isDragging;return(0,N[1])(k(E)),r.a.createElement("div",{ref:E,style:{opacity:_||a?.5:1},className:Ue()("assigned-column",Ua.a["column-card"],Ua.a["assigned-column"],l?Ua.a["column-valid"]:Ua.a["column-invalid"],{"border border-danger":y})},r.a.createElement("span",null,!!c&&r.a.createElement(c,{className:Ua.a["data-type-icon"]})),r.a.createElement("span",{className:Ua.a["column-title"]},o),s.aggregation&&r.a.createElement(aa.a,{className:"d-inline-block ml-2 raw-dropdown"},r.a.createElement(aa.a.Toggle,{variant:l?"primary":"danger",className:"pr-5"},Qa()(ve,m,m)),r.a.createElement(aa.a.Menu,null,u.map((function(e){return r.a.createElement(aa.a.Item,{key:e,onClick:function(){return p(t,e)}},Qa()(ve,e,e))})))),r.a.createElement("button",{className:Ua.a["remove-assigned"],type:"button",onClick:function(){return g(t)}},r.a.createElement(C.r,null)))}var lt=Object(s.d)(),ct=[],ot=function(e){var a=e.dimension,t=e.dataTypes,l=e.mapping,c=e.setMapping,u=e.commitLocalMapping,m=e.rollbackLocalMapping,d=e.draggingId,p=e.setDraggingId,g=e.replaceDimension,b=e.localMappding,f=Object(Xa.a)({accept:["column","card"],collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if("column"===e.type){var r,i,u=a.aggregation?Object(s.j)(a,t[e.id]):null,m=Object(s.q)(t[e.id]),d=0===(null===(r=a.validTypes)||void 0===r?void 0:r.length)||(null===(i=a.validTypes)||void 0===i?void 0:i.includes(m));c(Object(o.a)(Object(o.a)({},l),{},{ids:(l.ids||[]).concat($a()()),value:[].concat(Object(Me.a)(l.value||[]),[e.id]),isValid:d,mappedType:m,config:a.aggregation?{aggregation:[].concat(Object(Me.a)(Qa()(l,"config.aggregation")||[]),[u])}:void 0}))}else e.dimensionId!==a.id&&g(e.dimensionId,a.id,e.index,l.value?l.value.length:0,!0)}}),v=Object(i.a)(f,2),h=v[0].isOver,E=v[1],j=Object(n.useCallback)((function(e){c(Object(o.a)(Object(o.a)({},l),{},{config:{aggregation:Object(Me.a)(e)}}))}),[l,c]),y=Qa()(l,"ids",ct),k=Qa()(l,"value",ct),w=Qa()(l,"config.aggregation",ct),C=Object(n.useCallback)((function(e,a){var t=Object(Me.a)(w);t[e]=a,j(t)}),[w,j]),N=Object(n.useCallback)((function(e){var a;l.config&&(a=Object(o.a)(Object(o.a)({},l.config),{},{aggregation:l.config.aggregation.filter((function(a,t){return t!==e}))})),c(Object(o.a)(Object(o.a)({},l),{},{ids:l.ids.filter((function(a,t){return t!==e})),value:l.value.filter((function(a,t){return t!==e})),config:a}))}),[l,c]),_=Object(n.useCallback)((function(e,a){c(Object(o.a)(Object(o.a)({},l),{},{value:l.value.map((function(t,n){return n===e?a:t}))}))}),[l,c]),S=Object(n.useCallback)((function(e,a){var t;l.config&&(t=Object(o.a)(Object(o.a)({},l.config),{},{aggregation:at()(l.config.aggregation,e,a)})),c(Object(o.a)(Object(o.a)({},l),{},{ids:at()(l.ids,e,a),value:at()(l.value,e,a),config:t}),!0)}),[l,c]),D=Object(n.useCallback)((function(e,n){var r,i,u=a.aggregation?Object(s.j)(a,t[n.id]):null,m=$a()();p(m),c(Object(o.a)(Object(o.a)({},l),{},{ids:nt()(null!==(r=l.ids)&&void 0!==r?r:[],e,m),value:nt()(null!==(i=l.value)&&void 0!==i?i:[],e,n.id),config:a.aggregation?{aggregation:nt()(Qa()(l,"config.aggregation",[]),e,u)}:void 0}),!0)}),[t,a,l,p,c]);return r.a.createElement(O.a,{xs:6,lg:4,xl:4},r.a.createElement("div",{className:Ua.a["chart-dimension"]+" user-select-none"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center ".concat(Ua.a["chart-dimension-header"])},r.a.createElement("span",{className:"text-left"},a.validTypes.map((function(e){return r.a.createElement(qa,{key:e,type:e})}))),r.a.createElement("span",{className:"text-capitalize text-center"},a.name),r.a.createElement("span",{className:Ua.a["dimension-required"]+" text-right",style:{opacity:a.required?1:0}},a.required&&r.a.createElement(Ja,null))),y.map((function(e,n){var l,c,o=k[n],i=Object(s.q)(t[o]),p=a.aggregation?w[n]||Object(s.j)(a,i):void 0,f=0===(null===(l=a.validTypes)||void 0===l?void 0:l.length)||(null===(c=a.validTypes)||void 0===c?void 0:c.includes(i)),v=pe[Object(s.q)(t[o])];return r.a.createElement(rt,{id:e,key:e,index:n,onMove:S,onChangeDimension:_,onChangeAggregation:C,onDeleteItem:N,isValid:f,DataTypeIcon:v,columnId:o,dimension:a,aggregators:lt,relatedAggregation:p,commitLocalMapping:u,rollbackLocalMapping:m,onInsertColumn:D,draggingColumn:d===e,replaceDimension:g,localMappding:b})})),(a.multiple||0===k.length)&&r.a.createElement("div",{className:Ue()("dropzone",Ua.a.dropzone,Object(_e.a)({},Ua.a.active,h)),ref:E},!a.multiple&&"Drop dimension here",a.multiple&&0===k.length&&"Drop dimensions here",a.multiple&&k.length>0&&"Drop another dimension here")))};function it(e,a){var t;return e.config&&(t=Object(o.a)(Object(o.a)({},e.config),{},{aggregation:e.config.aggregation.filter((function(e,t){return t!==a}))})),Object(o.a)(Object(o.a)({},e),{},{ids:e.ids.filter((function(e,t){return t!==a})),value:e.value.filter((function(e,t){return t!==a})),config:t})}function st(e,a,t){return e.map((function(e,n){return n===a?t:e}))}function ut(e,a,t,n,r,l,c,i){var u,m,d,p,g,b,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],v={};v.aggregation=null===(u=a[t])||void 0===u||null===(m=u.config)||void 0===m||null===(d=m.aggregation)||void 0===d?void 0:d[r],v.value=a[t].value[r];var h,E=f?nt.a:st,O=a[n]||{},j=Object(o.a)(Object(o.a)({},O),{},{ids:E(null!==(p=O.ids)&&void 0!==p?p:[],l,e),value:E(null!==(g=O.value)&&void 0!==g?g:[],l,v.value)}),y=c[n];c.aggregation&&(h=v.aggregation?v.aggregation:Object(s.j)(y,i[v.value]),j.config={aggregation:E(Qa()(O,"config.aggregation",[]),l,h)});var k=Object(o.a)(Object(o.a)({},a),{},(b={},Object(_e.a)(b,t,it(a[t],r)),Object(_e.a)(b,n,j),b));return k}var mt=r.a.memo(r.a.forwardRef((function(e,a){var t=e.dataTypes,l=e.dimensions,c=e.mapping,s=e.setMapping,u=Object(n.useState)(c),m=Object(i.a)(u,2),d=m[0],p=m[1],g=Object(n.useCallback)((function(e,a,t){p((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(_e.a)({},e,a))})),t||s((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(_e.a)({},e,a))}))}),[s]),b=Object(n.useCallback)((function(e,a,n,r){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=$a()();c&&j(o),p((function(i){return ut(o,i,e,a,n,r,l,t,c)})),c||s((function(c){return ut(o,c,e,a,n,r,l,t)}))}),[t,l,s]),f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],j=v[1],y=Object(n.useCallback)((function(){p(c),j(null)}),[c]),k=function(){s(w.current),j(null)},w=Object(n.useRef)();return Object(n.useEffect)((function(){w.current=d})),Object(n.useImperativeHandle)(a,(function(){return{clearLocalMapping:function(){p({})}}})),r.a.createElement(Aa.a,{backend:Ia.a},r.a.createElement(E.a,null,r.a.createElement(O.a,{xs:3},r.a.createElement("h5",{className:"text-uppercase"},"Dimensions"),La()(t,(function(e,a){return r.a.createElement(Pa,{key:a,dimensionName:a,dimensionType:e,commitLocalMapping:k,rollbackLocalMapping:y})}))),r.a.createElement(O.a,null,r.a.createElement("h5",{className:"text-uppercase"},"Chart Variables"),r.a.createElement(E.a,{className:"sticky-top",style:{top:"calc(var(--header-height) + 16px)"}},l.map((function(e){return r.a.createElement(ot,{key:e.id,dimension:e,dataTypes:t,mapping:d[e.id]||{},setMapping:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g(e.id,a,t)},commitLocalMapping:k,rollbackLocalMapping:y,draggingId:h,setDraggingId:j,replaceDimension:b,localMappding:d})}))))))}))),dt=t(41),pt=t.n(dt),gt=r.a.memo((function(e){var a=e.options,t=void 0===a?[]:a,n=e.value,l=e.error,c=e.onChange,o=e.default,i=e.label,s=Object(Le.a)(e,["options","value","error","onChange","default","label"]);return r.a.createElement(E.a,{className:s.className},r.a.createElement(O.a,{xs:6,className:"d-flex align-items-center nowrap"},i),r.a.createElement(O.a,{xs:6},r.a.createElement("select",{className:"custom-select raw-select",value:null!==n&&void 0!==n?n:o,onChange:function(e){var a=e.target.value,t="number"===s.type?Number(a):a;c(t)}},t.map((function(e){return pt()(e)?r.a.createElement("option",{key:e.value,value:e.value},e.label):r.a.createElement("option",{key:e,value:e},e)}))),l&&r.a.createElement("small",null,r.a.createElement("i",null,l))))})),bt=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Le.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(gt,Object.assign({value:a,error:t,onChange:n,default:l,disabled:!o,label:c},i)):r.a.createElement(E.a,{className:i.className},r.a.createElement(O.a,{xs:6,className:"d-flex align-items-center nowrap"},c),r.a.createElement(O.a,{xs:6},r.a.createElement("input",{className:"w-100 form-control text-field",type:"number",value:null!==a&&void 0!==a?a:"",step:i.step,min:i.min,max:i.max,disabled:!o,onChange:function(e){var a=e.target.value;if(""===a)n(void 0);else{var t=parseFloat(a);isNaN(t)?n(void 0):n(t)}},placeholder:l})),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),ft=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Le.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(gt,Object.assign({value:a,error:t,onChange:n,default:l,label:c},i)):r.a.createElement("label",{className:"d-block"},r.a.createElement("b",null,c),r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:null!==a&&void 0!==a?a:"",step:i.step,disabled:!o,onChange:function(e){n(e.target.value)},placeholder:l}),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),vt=t(135),ht=t.n(vt),Et=t(357);function Ot(e){var a=e.color,t=e.onChange,l=e.disabled,c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],u=o[1],m=null!==a&&void 0!==a?a:"#000000";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ht.a.swatch,onClick:function(){return u(!0)}},r.a.createElement("div",{className:ht.a.color,style:{background:m}}),m.toUpperCase()),s&&r.a.createElement("div",{className:ht.a.popover},r.a.createElement("div",{className:ht.a.cover,onClick:function(){return u(!1)}}),r.a.createElement(Et.SketchPicker,{disabled:l,disableAlpha:!0,color:m,onChangeComplete:function(e){return t(e.hex)}})))}var jt=r.a.memo((function(e){var a=e.value,t=e.error,n=e.onChange,l=e.default,c=e.label,o=e.isEnabled,i=Object(Le.a)(e,["value","error","onChange","default","label","isEnabled"]);return i.options?r.a.createElement(gt,Object.assign({value:a,error:t,onChange:n,default:l,label:c},i)):r.a.createElement("label",{className:i.className+" row"},r.a.createElement(O.a,{xs:6,className:"d-flex align-items-center"},c),r.a.createElement(O.a,{xs:6},r.a.createElement(Ot,{disabled:!o,color:a,onChange:n})),t&&r.a.createElement("small",null,r.a.createElement("i",null,t)))})),yt=t(32),kt=t.n(yt),wt=r.a.memo((function(e){var a,t=e.label,n=e.scale,l=e.numSamples,c=void 0===l?150:l;return a=n.ticks?n.ticks(c):n.domain?n.domain():[],r.a.createElement("div",{className:kt.a["scheme-preview"]},t&&r.a.createElement("div",{style:{marginBottom:2}},Qa()(Ee,t,t)),r.a.createElement("div",{className:"d-flex"},a.map((function(e){return r.a.createElement("div",{key:"sample-"+e,style:{flex:1,height:10,background:n(e)}})}))))})),Ct=r.a.memo((function(e){var a=e.interpolators,t=e.interpolator,n=e.setInterpolator,l=e.colorDataset,c=e.colorDataType,o=e.scaleType,i=e.currentFinalScale;return r.a.createElement(aa.a,{className:"d-inline-block raw-dropdown w-100"},r.a.createElement(aa.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!c},i&&r.a.createElement(wt,{scale:i})),c&&r.a.createElement(aa.a.Menu,{className:"w-100"},a.map((function(e){return r.a.createElement(aa.a.Item,{key:e,onClick:function(){return n(e)},className:kt.a["color-scheme-dropdown-item"]},l[0]&&s.b[o][t]&&r.a.createElement(wt,{scale:Object(s.p)(o,Object(s.f)(l,c,o),e),label:e}))}))))}));function Nt(e){var a=e.resetScale;return r.a.createElement(Fe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(Ba.a,{id:"tooltip-top"},"Reset domain")},r.a.createElement("span",{type:"button",className:"btn",onClick:a},r.a.createElement(C.a,{width:"16",height:"16"})))}function _t(e){var a=e.invertScale;return r.a.createElement(Fe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(Ba.a,{id:"tooltip-top"},"Invert")},r.a.createElement("span",{type:"button",className:"btn",onClick:a},r.a.createElement(C.b,{width:"16",height:"16"})))}function St(e){var a=e.handleChangeLocked,t=e.locked;return r.a.createElement(Fe.a,{key:"bottom",placement:"bottom",overlay:r.a.createElement(Ba.a,{id:"tooltip-top"},t?"Unlock":"Lock"," scale")},r.a.createElement("span",{type:"button",className:"btn ".concat(t?"Xbtn-primary":""),onClick:function(){return a(!t)}},t?r.a.createElement(C.p,{width:"16",height:"16"}):r.a.createElement(C.m,{width:"16",height:"16"})))}var Dt=t(358),xt=t.n(Dt);function Tt(e){var a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current=e}),[e]),a.current}function Rt(e){return 0===e.userDomain?0:e.userDomain?"date"===Object(s.r)(e.userDomain)?e.userDomain.toISOString().substring(0,10):e.userDomain:""}var Mt=function(e){var a=e.value,t=(e.error,e.onChange),l=e.defaultValue,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue),u=e.colorDataset,m=e.colorDataType,d=e.hasAnyMapping,p=Object(Le.a)(e,["value","error","onChange","defaultValue","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataset","colorDataType","hasAnyMapping"]),g=Object(n.useRef)(!!a.__loaded),b=Object(n.useState)(Qa()(a,"scaleType")),f=Object(i.a)(b,2),v=f[0],h=f[1],j=Object(n.useMemo)((function(){var e=Qa()(l,"defaultColor","#cccccc");return Qa()(a,"defaultColor",e)}),[l,a]),y=Object(n.useState)(Qa()(a,"locked")),k=Object(i.a)(y,2),w=k[0],C=k[1],N=Object(n.useMemo)((function(){return Object(s.e)(m,u)}),[m,u]),_=Object(n.useState)(Qa()(a,"scaleType")?Object.keys(s.b[Qa()(a,"scaleType")]):[]),S=Object(i.a)(_,2),D=S[0],x=S[1],T=Object(n.useState)(Qa()(a,"interpolator")),R=Object(i.a)(T,2),M=R[0],L=R[1],I=Object(n.useState)(Qa()(a,"userScaleValues",[]).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userDomain:e.domain,userRange:e.range})}))),A=Object(i.a)(I,2),F=A[0],V=A[1],U=Object(n.useCallback)((function(e,a,t,n){if(a&&e&&s.b[a][e]&&t&&t.length&&t.map((function(e){return e.domain})).filter((function(e){return void 0!==e})).length)return Object(s.g)(u,m,a,e,t)}),[m,u]),P=Object(n.useCallback)((function(e,a){if(!u.length||!m||!a)return[];if(!s.b[a][e])return[];var t=Object(s.f)(u,m,a);return Object(s.n)(t,a,e).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{userRange:e.range,userDomain:e.domain})}))}),[m,u]),B=Object(n.useCallback)((function(e){return e.map((function(e){var a;return{range:e.userRange,domain:"date"===m?null===(a=e.userDomain)||void 0===a?void 0:a.toString():e.userDomain}}))}),[m]),q=Object(n.useMemo)((function(){if(v&&M){var e=F&&F.length?F:P(M,v),a=B(e);return U(M,v,a)}return Object(s.i)()}),[U,P,B,M,v,F]),G=Object(n.useCallback)((function(e){var a=B(e);t({scaleType:v,interpolator:M,userScaleValues:a,defaultColor:j,locked:w})}),[B,v,M,j,w,t]),z=Object(n.useCallback)((function(e,a){var t=Object(Me.a)(F);t[e].userRange=a,V(t),G(t)}),[G,F]),W=Object(n.useCallback)((function(e,a){var t=Object(Me.a)(F);t[e].userDomain=a,V(t),G(t)}),[G,F]),H=Object(n.useCallback)((function(e){h(e);var a=s.b[e]?Object.keys(s.b[e]):[];x(a);var n=a[0];L(n);var r=P(n,e);V(r);var l=B(r);t({scaleType:e,interpolator:n,userScaleValues:l,defaultColor:j,locked:w})}),[P,B,j,t,w]),K=Object(n.useCallback)((function(e,a){L(e);var n=P(e,v);V(n);var r=B(n);if(a){var l=xt()(a,"domain");r=r.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{range:l[e.domain.toString()]?l[e.domain.toString()].userRange:e.range})}))}t({scaleType:v,interpolator:e,userScaleValues:r,defaultColor:j,locked:w})}),[P,B,t,v,j,w]),J=Object(n.useCallback)((function(e){C(e),g.current=!0,t({scaleType:v,interpolator:M,userScaleValues:F,defaultColor:j,locked:e})}),[v,M,F,j,t]),X=Object(n.useCallback)((function(){K(M,F)}),[K,M,F]),Y=Object(n.useCallback)((function(){var e=Object(Me.a)(F);e.reverse();var a=F.map((function(a,t){return Object(o.a)(Object(o.a)({},a),{},{userRange:e[t].userRange,range:e[t].range})}));V(a),G(a)}),[G,F]),Q=Tt(c);return Object(n.useEffect)((function(){Q&&c!==Q&&(g.current=!1)}),[c,Q]),Object(n.useEffect)((function(){if(!g.current&&!w){var e=N[0];H(e)}}),[N,H,w]),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:p.className,style:{marginTop:"8px",marginBottom:"8px"}},r.a.createElement(O.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scale"),r.a.createElement(O.a,{xs:7},r.a.createElement(aa.a,{className:"d-inline-block raw-dropdown w-100"},r.a.createElement(aa.a.Toggle,{variant:"white",className:"w-100",style:{paddingRight:24},disabled:!m},Qa()(he,v,v)),r.a.createElement(aa.a.Menu,{className:"w-100"},N.map((function(e){return r.a.createElement(aa.a.Item,{key:e,onClick:function(){return H(e)}},Qa()(he,e,e))})))))),r.a.createElement(E.a,{className:[p.className].join(" "),style:{marginTop:"8px",marginBottom:"8px"}},r.a.createElement(O.a,{xs:5,className:"d-flex align-items-center nowrap"},"Color scheme"),r.a.createElement(O.a,{xs:7},r.a.createElement(Ct,{interpolators:D,interpolator:M,setInterpolator:K,colorDataset:u,colorDataType:m,scaleType:v,currentFinalScale:q}))),m&&F&&r.a.createElement("div",{className:kt.a["color-swatches-list"]},F.map((function(e,a){return r.a.createElement(E.a,{key:a,className:[kt.a["chart-option"],kt.a["color-swatch"],"ordinal"!==v?kt.a["not-ordinal"]:kt.a.ordinal].join(" ")},r.a.createElement(O.a,{xs:12},r.a.createElement("div",{className:kt.a["color-scale-item"]},"ordinal"===v&&void 0!==Qa()(e,"domain")&&r.a.createElement("span",{className:"nowrap text-truncate pr-2",title:e.domain&&e.domain.toString()},""===e.domain?"[empty string]":e.domain.toString()),"ordinal"!==v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nowrap"},0===a?"Start":a===F.length-1?"End":"Middle"),r.a.createElement("input",{disabled:w,type:Object(s.r)(e.userDomain),className:"form-control text-field",value:Rt(e),onChange:function(e){W(a,"date"===m?new Date(e.target.value):e.target.value)}})),r.a.createElement(Ot,{color:e.userRange,onChange:function(e){z(a,e)}}))))})),r.a.createElement(E.a,null,r.a.createElement(O.a,{className:"d-flex justify-content-end"},r.a.createElement(Nt,{resetScale:X}),r.a.createElement(_t,{invertScale:Y}),"ordinal"!==v&&r.a.createElement(St,{locked:w,handleChangeLocked:J}))))):null},Lt=function(e){var a=e.value,t=(e.error,e.onChange),l=e.default,c=(e.label,e.dimension,e.dataset,e.mapping,e.dataTypes,e.chart,e.mappedData,e.mappingValue,e.colorDataType,e.colorDataset,Object(Le.a)(e,["value","error","onChange","default","label","dimension","dataset","mapping","dataTypes","chart","mappedData","mappingValue","colorDataType","colorDataset"]),Object(n.useMemo)((function(){var e=Qa()(l,"defaultColor","#cccccc");return Qa()(a,"defaultColor",e)}),[l,a])),s=Object(n.useState)(c),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useCallback)((function(e){d(e);var n=Object(o.a)(Object(o.a)({},a),{},{defaultColor:e});t(n)}),[a,t]);return Object(n.useEffect)((function(){l&&l.defaultColor!==m&&p(l.defaultColor)}),[m,l,p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:[kt.a["chart-option"],"row"].join(" ")},r.a.createElement(O.a,{xs:6,className:"d-flex align-items-center"},"Default"),r.a.createElement(O.a,{xs:6},r.a.createElement(Ot,{color:m,onChange:p}))))},It=function(e){var a=e.value,t=e.onChange,l=e.default,c=e.mappingValue,o=e.colorDataType,i=e.colorDataset,s=Object(n.useMemo)((function(){return i&&i.length>0}),[i]);return r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(Lt,{onChange:t,defaultValue:l,value:a}),s&&r.a.createElement(Mt,{hasAnyMapping:s,mappingValue:c,defaultValue:l,value:a,colorDataType:o,colorDataset:i,onChange:t}))},At=t(738),Ft=r.a.memo((function(e){var a=e.optionId,t=e.label,n=e.value,l=e.error,c=e.onChange,o=e.className,i=e.isEnabled;return r.a.createElement(E.a,{className:o},r.a.createElement(O.a,{xs:6,className:"d-flex align-items-center nowrap"},t),r.a.createElement(At.a,{className:"col-6 d-flex align-items-center"},r.a.createElement(At.a.Check,{type:"switch",checked:!!n,disabled:!i,onChange:function(e){c(e.target.checked)},id:a,label:n?"Yes":"No"})),l&&r.a.createElement("div",{className:"col-12"},r.a.createElement("small",null,r.a.createElement("i",null,l))))})),Vt=t(243),Ut=t.n(Vt),Pt={number:bt,text:ft,color:jt,colorScale:It,boolean:Ft};function Bt(e,a,t){var n=Qa()(e[a],"value[".concat(t,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(_e.a)({},a,Object(o.a)(Object(o.a)({},e[a]),{},{value:[n]})))}function qt(e,a,t){return Array.isArray(e)?e.map((function(e){var n=Qa()(e[a],"[".concat(t,"]"));return Object(o.a)(Object(o.a)({},e),{},Object(_e.a)({},a,n))})):e}function Gt(e,a){return Array.isArray(e.repeatDefault)?Qa()(e.repeatDefault,"[".concat(a,"]"),e.default):e.default}function zt(e){var a=e.type,t=e.optionId,l=e.setVisualOptions,c=e.label,i=e.repeatIndex,u=Object(Le.a)(e,["type","optionId","setVisualOptions","label","repeatIndex"]),m=Pt[a],d=Object(n.useMemo)((function(){return"colorScale"!==a?null:Object.keys(Ut()(u.visualOptions,t)).map((function(e){return JSON.stringify(Qa()(u.visualOptions,e,""))})).join("-")}),[a,u.visualOptions,t]),p=Object(n.useMemo)((function(){if("colorScale"!==a)return null;if(!u.domain||!u.chart[u.domain])return null;try{return u.chart[u.domain](u.mappedData,u.mapping,u.visualOptions)}catch(e){return null}}),[a,u.chart,u.domain,u.mappedData,u.mapping,d]),g=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?"__custom__":Qa()(u.mapping,"[".concat(u.dimension,"].value"))}),[p,u.dimension,u.mapping,a]),b=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?p.type:u.dataTypes[g]?Object(s.q)(u.dataTypes[g]):"string"}),[a,u.dataTypes,p,g]),f=Object(n.useMemo)((function(){return"colorScale"!==a?null:p?p.domain:u.mappedData?u.mappedData.map((function(e){return Qa()(e,u.dimension)})).filter((function(e){return void 0!==e&&!(Array.isArray(e)&&!e.length)})):[]}),[a,u.dimension,p,u.mappedData]),v=Object(n.useCallback)((function(e){l((function(a){var n=e;return void 0!==i&&((n=a[t]||[])[i]=e),Object(o.a)(Object(o.a)({},a),{},Object(_e.a)({},t,n))}))}),[t,i,l]);return r.a.createElement(m,Object.assign({type:a,domainFromChart:p,mappingValue:g,colorDataType:b,colorDataset:f,optionId:t,label:void 0!==i?r.a.createElement(r.a.Fragment,null,c," (",i+1,")"):c},Ut()(u,["mapping","visualOptions","chart","dataset","dataTypes","mappedData"]),{onChange:v}))}var Wt=function(e){var a=e.chart,t=e.dataset,l=e.mapping,c=e.dataTypes,u=e.visualOptions,m=e.setVisualOptions,d=e.error,p=e.mappedData,g=Object(n.useMemo)((function(){return Object(s.o)(null===a||void 0===a?void 0:a.visualOptions)}),[a]),b=Object(n.useState)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]=!0)}return e})),f=Object(i.a)(b,2),v=f[0],h=f[1],j=Object(n.useMemo)((function(){return Object(s.m)(g,u,l)}),[g,u,l]),y=Object(n.useMemo)((function(){var e={};for(var a in g){var t=g[a].group;e.hasOwnProperty(t)||(e[t]="artboard"!==t)}return h(e),Object.keys(g).reduce((function(e,a){var t=g[a],n=(null===t||void 0===t?void 0:t.group)||"";return e[n]||(e[n]={}),e[n][a]=t,e}),{})}),[g]),k=Object(n.useMemo)((function(){var e=Object(s.k)(g,l),a=Object(o.a)(Object(o.a)({},e),u);return Object(s.h)(g,a)}),[l,g,u]);return r.a.createElement("div",{className:[kt.a["chart-options"],"col-4","col-xl-3"].join(" ")},La()(y,(function(e,n){return r.a.createElement("div",{key:n,groupname:n,className:[kt.a["options-group"],v[n]?kt.a.collapsed:""].join(" ")},r.a.createElement(E.a,{className:"sticky-top"},r.a.createElement(O.a,{className:"d-flex justify-content-between align-items-center ".concat(kt.a["group-header"])},r.a.createElement("h5",{className:"text-uppercase m-0"},n),r.a.createElement("span",{className:[kt.a["collapse-button"],"cursor-pointer"].join(" "),onClick:function(){return h(Object(o.a)(Object(o.a)({},v),{},Object(_e.a)({},n,!v[n])))}}))),La()(e,(function(e,n){var o;return e.repeatFor?Qa()(l,"[".concat(e.repeatFor,"].value"),[]).map((function(o,i){var s,g,b;return r.a.createElement(zt,Object.assign({className:kt.a["chart-option"],key:n+i,repeatIndex:i},e,{optionId:n,error:null===d||void 0===d||null===(s=d.errors)||void 0===s?void 0:s[n+i],value:null!==(g=null===u||void 0===u||null===(b=u[n])||void 0===b?void 0:b[i])&&void 0!==g?g:Gt(e,i),mapping:"colorScale"===e.type?Bt(l,e.repeatFor,i):void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?u:void 0,mappedData:qt(p,e.repeatFor,i),setVisualOptions:m,isEnabled:j[n]}))})):r.a.createElement(zt,Object.assign({className:kt.a["chart-option"],key:n},e,{optionId:n,error:null===d||void 0===d||null===(o=d.errors)||void 0===o?void 0:o[n],value:null===u||void 0===u?void 0:u[n],mapping:"colorScale"===e.type?l:void 0,chart:"colorScale"===e.type?a:void 0,dataset:"colorScale"===e.type?t:void 0,dataTypes:"colorScale"===e.type?c:void 0,visualOptions:"colorScale"===e.type?u:void 0,mappedData:p,setVisualOptions:m,isEnabled:j[n]}))})),"artboard"===n&&u.showLegend&&r.a.createElement("p",{className:"small"},"The final output will be ",null===k||void 0===k?void 0:k.width,"px *"," ",null===k||void 0===k?void 0:k.height,"px including the legend."))})))};var Ht=r.a.memo((function(e){var a=e.chart,t=e.dataset,l=e.dataTypes,c=e.mapping,o=e.visualOptions,u=e.error,m=e.setError,d=e.setRawViz,p=e.mappedData,g=Object(n.useRef)(null),b=function(e,a){var t=Object(n.useState)(e),r=Object(i.a)(t,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){c(e)}),a);return function(){clearTimeout(t)}}),[e,a]),l}(o,200);return Object(n.useEffect)((function(){m(null);var e=[];for(var n in c)c[n].ids&&c[n].ids.length>0&&e.push(n);var o=a.dimensions.filter((function(a){return a.required&&-1===e.indexOf(a.id)}));if(o.length>0){var i=r.a.createElement("span",null,"Required chart variables: you need to map"," ",o.map((function(e,a){return r.a.createElement("span",{key:a,className:"font-weight-bold"},e.name)})).reduce((function(e,a){return[e," and ",a]})));for(m({variant:"secondary",message:i}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var u=a.dimensions.filter((function(e){return e.multiple&&e.required&&e.minValues&&c[e.id].ids.length<e.minValues}));if(u.length>0){var f=r.a.createElement("span",null,"Please map"," ",u.map((function(e){return r.a.createElement(r.a.Fragment,null,"at least ",r.a.createElement("span",{className:"font-weight-bold"},e.minValues)," ","dimensions on ",r.a.createElement("span",{className:"font-weight-bold"},e.name))})).reduce((function(e,a){return[e," and ",a]})),".");for(m({variant:"secondary",message:f}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}else{var v=function(e){if(c[e].ids&&c[e].ids.length>0&&!c[e].isValid){var t=a.dimensions.find((function(a){return a.id===e})),n="Data-type mismatch: you can\u2019t map ".concat(c[e].mappedType,"s on ").concat(t.name,".");for(m({variant:"danger",message:n}),d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild);return{v:void 0}}};for(var h in c){var E=v(h);if("object"===typeof E)return E.v}if(p)try{var O=Object(s.a)(a,{data:t,mapping:c,dataTypes:l,visualOptions:b});try{var j=O.renderToDOM(g.current,p);d(j),m(null)}catch(y){console.log("chart error",y),m({variant:"danger",message:"Chart error. "+y.message}),d(null)}}catch(y){for(;g.current.firstChild;)g.current.removeChild(g.current.firstChild);console.log({e:y}),m({variant:"danger",message:"Chart error. "+y.message}),d(null)}else for(d(null);g.current.firstChild;)g.current.removeChild(g.current.firstChild)}}}),[m,b,d,p,a,c]),r.a.createElement("div",{className:"col-8 col-xl-9"},r.a.createElement("div",{className:["overflow-auto","position-sticky"].join(" "),style:{top:"calc(15px + var(--header-height))"}},u&&r.a.createElement(ya,{variant:u.variant,message:u.message}),r.a.createElement("div",{ref:g})))})),Kt=function(e){var a=e.chart,t=e.dataset,l=e.dataTypes,c=e.mapping,o=e.visualOptions,s=e.setVisualOptions,u=e.setRawViz,m=e.setMappingLoading,d=Object(n.useState)({variant:"secondary",message:"Required chart variables"}),p=Object(i.a)(d,2),g=p[0],b=p[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),h=v[0],O=v[1];return Object(n.useEffect)((function(){try{m(!0),function(e,a){var t=a.data,n=a.mapping,r=a.visualOptions,l=a.dataTypes;try{T.terminate()}catch(c){}return T=new je,Oe.a(T).mapData(e,{data:t,mapping:n,visualOptions:r,dataTypes:l})}(a.metadata.name,{data:t,mapping:c,dataTypes:l}).then((function(e){m(!1),O(e)})).catch((function(e){console.error(e),m(!1),O(null)}))}catch(e){console.error(e),m(!1),O(null)}}),[a,c,l,b,u,m,t]),r.a.createElement(E.a,null,r.a.createElement(Wt,{chart:a,dataset:t,mapping:c,dataTypes:l,visualOptions:o,setVisualOptions:s,error:g,mappedData:h}),r.a.createElement(Ht,{chart:a,dataset:t,dataTypes:l,mapping:c,visualOptions:o,error:g,setError:b,setRawViz:u,mappedData:h}))},Jt=t(734),Xt=t(735);function Yt(e,a){var t=document.createElement("a");return t.href=e,t.download=a||"download",t.click(),t}function Qt(e){var a=e.rawViz,t=e.exportProject,l=Object(n.useCallback)((function(e){var t=(new XMLSerializer).serializeToString(a._node.firstChild),n=window.URL||window.webkitURL||window,r=new Blob([t],{type:"image/svg+xml;charset=utf-8"});Yt(n.createObjectURL(r),e),n.revokeObjectURL(r)}),[a]),c=Object(n.useCallback)((function(e,t){var n=(new XMLSerializer).serializeToString(a._node.firstChild),r=window.URL||window.webkitURL||window,l=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),c=r.createObjectURL(l),o=document.createElement("canvas");o.height=a._node.firstChild.clientHeight,o.width=a._node.firstChild.clientWidth;var i=o.getContext("2d"),s=new Image;s.onload=function(){i.drawImage(s,0,0),Yt(o.toDataURL(e),t),r.revokeObjectURL(l)},s.src=c}),[a]),o=Object(n.useCallback)((function(e){var a=t(),n=JSON.stringify(a),r=new Blob([n],{type:"application/json"}),l=window.URL||window.webkitURL||window,c=l.createObjectURL(r);Yt(c,e),l.revokeObjectURL(c)}),[t]),s=Object(n.useState)("svg"),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)("viz"),g=Object(i.a)(p,2),b=g[0],f=g[1],v=Object(n.useCallback)((function(){switch(m){case"svg":l("".concat(b,".svg"));break;case"png":c("image/png","".concat(b,".png"));break;case"jpg":c("image/jpeg","".concat(b,".jpg"));break;case"rawgraphs":o("".concat(b,".rawgraphs"))}}),[b,m,c,o,l]);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-sm-3"},r.a.createElement(Jt.a,{className:"mb-3 raw-input-group"},r.a.createElement("input",{type:"text",className:"form-control text-field",value:b,onChange:function(e){return f(e.target.value)}}),r.a.createElement(Xt.a,{as:Jt.a.Append,title:".".concat(m),id:"input-group-dropdown-1",className:"raw-dropdown"},["svg","png","jpg","rawgraphs"].map((function(e){return r.a.createElement(aa.a.Item,{key:e,onClick:function(){return d(e)}},".",e)}))))),r.a.createElement("div",{className:"col col-sm-2"},r.a.createElement("button",{className:"btn btn-primary btn-block raw-btn",onClick:v},"Download")))}var Zt=t(161),$t=t.n(Zt),en=t(359),an=t.n(en);var tn=function(){var e=Re(),a=e.userInput,t=e.userData,l=e.userDataType,c=e.parseError,m=e.unstackedData,d=e.unstackedColumns,p=e.data,g=e.separator,f=e.thousandsSeparator,v=e.decimalsSeparator,h=e.locale,E=e.stackDimension,O=e.dataSource,j=e.loading,k=e.hydrateFromSavedProject,w=Object(n.useState)(null),C=Object(i.a)(w,2),N=C[0],S=C[1],D=Object(n.useState)({}),x=Object(i.a)(D,2),T=x[0],M=x[1],L=Object(n.useState)({}),I=Object(i.a)(L,2),A=I[0],F=I[1],V=Object(n.useState)(null),U=Object(i.a)(V,2),P=U[0],B=U[1],q=Object(n.useState)(!1),G=Object(i.a)(q,2),z=G[0],W=G[1],H=Object(n.useRef)(null),K=Object(n.useMemo)((function(){if(Qa()(p,"dataTypes"))return Object.keys(p.dataTypes)}),[p]),J=Tt(K),X=Object(n.useCallback)((function(){H.current&&H.current.clearLocalMapping()}),[]);Object(n.useEffect)((function(){J&&(K?J.join(".")!==K.join(".")&&(M({}),X()):(M({}),X()))}),[K,J,X]);var Y=Object(n.useCallback)((function(e){M({}),X(),S(e);var a=Object(s.o)(null===e||void 0===e?void 0:e.visualOptions);F(Object(s.k)(a)),B(null)}),[X]),Q=Object(n.useCallback)((function(){return function(e,a,t,n,r,l,c,o,i,s,u,m,d,p,g,b){var f,v,h={version:"1.1"};return h.userInput=e,h.userInputFormat=t,h.dataSource=d,h.rawData=(f=a,v=Object.keys(c.dataTypes),f.map((function(e){return v.map((function(a){return e[a]}))}))),h.parseError=n,h.parseOptions={separator:o,thousandsSeparator:i,decimalsSeparator:s,locale:u,stackDimension:m,unstackedData:r,unstackedColumns:l},h.dataTypes=c.dataTypes,h.chart=p.metadata.id,h.mapping=g,h.visualOptions=b,h}(a,t,l,c,m,d,p,g,f,v,h,E,O,N,T,A)}),[N,p,O,v,h,T,c,g,E,f,t,l,a,A,d,m]),Z=Object(n.useCallback)((function(e){k(e),S(e.currentChart),M(e.mapping);var a=Object(o.a)({},e.visualOptions);Object.keys(a).forEach((function(e){$t()(a[e])&&(a[e].__loaded=!0)})),F(e.visualOptions)}),[k]);return Object(n.useEffect)((function(){var e;S(Na[0]);var a=Object(s.o)(null===(e=Na[0])||void 0===e?void 0:e.visualOptions);F(Object(s.k)(a))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(b,{menuItems:u}),r.a.createElement("div",{className:"app-sections"},r.a.createElement(y,{title:"1. Load your data",loading:j},r.a.createElement(wa,Object.assign({},e,{hydrateFromProject:Z}))),p&&r.a.createElement(y,{title:"2. Choose a chart"},r.a.createElement(Ra,{availableCharts:Na,currentChart:N,setCurrentChart:Y})),p&&N&&r.a.createElement(y,{title:"3. Mapping",loading:z},r.a.createElement(mt,{ref:H,dimensions:N.dimensions,dataTypes:p.dataTypes,mapping:T,setMapping:M})),p&&N&&r.a.createElement(y,{title:"4. Customize"},r.a.createElement(Kt,{chart:N,dataset:p.dataset,dataTypes:p.dataTypes,mapping:T,visualOptions:A,setVisualOptions:F,setRawViz:B,setMappingLoading:W})),p&&N&&P&&r.a.createElement(y,{title:"5. Export"},r.a.createElement(Qt,{rawViz:P,exportProject:Q})),r.a.createElement(_,null),r.a.createElement(an.a,{location:"bottom",buttonText:"Got it!",style:{background:"#f5f5f5",color:"#646467"},buttonStyle:{background:"#646467",color:"white",fontSize:"13px",borderRadius:"3px",padding:"5px 20px"},buttonClasses:"btn btn-default btn-grey",acceptOnScroll:!0},"This website uses Google Analytics to anonymously collect browsing data."," ",r.a.createElement("a",{href:"https://rawgraphs.io/privacy/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-body border-bottom border-dark"},"Learn More"))),r.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(tn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[384,1,2]]]);